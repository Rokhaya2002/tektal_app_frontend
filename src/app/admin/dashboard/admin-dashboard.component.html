<div class="dashboard-container">
  <header class="dashboard-header">
    <div class="header-content compact">
      <div class="dashboard-title-block">
        <h1 class="sora dashboard-title">Dashboard</h1>
        <div class="dashboard-subtitle">
          {{ welcomeMessage }}, Admin&nbsp;!
          <span class="today">{{ today }}</span>
        </div>
      </div>
      <button class="logout-btn" (click)="logout()">
        <span>🚪</span> Déconnexion
      </button>
    </div>
  </header>

  <main class="dashboard-main compact">
    <!-- Statistiques rapides -->
    <div class="quick-stats-card">
      <div class="quick-stats-title">Statistiques rapides</div>
      <div class="quick-stats-row">
        <div class="quick-stats-item">
          <span class="quick-stats-label">Date</span>
          <span class="quick-stats-value">{{ today }}</span>
        </div>
        <div class="quick-stats-item">
          <span class="quick-stats-label">Lignes</span>
          <span class="quick-stats-value">{{ linesCount }}</span>
        </div>
        <div class="quick-stats-item">
          <span class="quick-stats-label">Arrêts</span>
          <span class="quick-stats-value">{{ stopsCount }}</span>
        </div>
      </div>
    </div>

    <!-- Statistiques de recherche -->
    <app-search-stats></app-search-stats>

    <!-- Cartes de statistiques -->
    <div class="stats-cards compact">
      <div class="stat-card compact">
        <div class="stat-icon">🚌</div>
        <div class="stat-content">
          <h3>Lignes</h3>
          <div class="stat-number">{{ linesCount }}</div>
          <p class="stat-description">Lignes disponibles</p>
        </div>
      </div>
      <div class="stat-card compact">
        <div class="stat-icon">📍</div>
        <div class="stat-content">
          <h3>Arrêts</h3>
          <div class="stat-number">{{ stopsCount }}</div>
          <p class="stat-description">Arrêts gérés</p>
        </div>
      </div>
    </div>

    <!-- Dernières lignes et arrêts -->
    <div class="dashboard-lists-row">
      <div class="dashboard-list-card">
        <div class="dashboard-list-title">Dernières lignes</div>
        <ul class="dashboard-list">
          <li *ngFor="let line of recentLines">
            <div class="list-main">{{ line.name }}</div>
            <div class="list-secondary">
              {{ line.departure }} → {{ line.destination }}
            </div>
            <div class="list-date">{{ line.created_at | date : "short" }}</div>
          </li>
          <li *ngIf="recentLines.length === 0" class="empty-list">
            Aucune ligne récente
          </li>
        </ul>
      </div>
      <div class="dashboard-list-card">
        <div class="dashboard-list-title">Derniers arrêts</div>
        <ul class="dashboard-list">
          <li *ngFor="let stop of recentStops">
            <div class="list-main">{{ stop.name }}</div>
            <div class="list-date">{{ stop.created_at | date : "short" }}</div>
          </li>
          <li *ngIf="recentStops.length === 0" class="empty-list">
            Aucun arrêt récent
          </li>
        </ul>
      </div>
    </div>

    <!-- Actions rapides -->
    <div class="action-cards compact">
      <div class="action-card compact" (click)="navigateToLines()">
        <div class="action-icon">➕</div>
        <h3>Lignes</h3>
        <p>Gérer les lignes de bus</p>
        <div class="action-arrow">→</div>
      </div>
      <div class="action-card compact" (click)="navigateToStops()">
        <div class="action-icon">📍</div>
        <h3>Arrêts</h3>
        <p>Gérer les arrêts</p>
        <div class="action-arrow">→</div>
      </div>
    </div>

    <div class="quick-actions compact">
      <div class="quick-buttons compact">
        <button class="quick-btn compact" (click)="navigateToLines()">
          <span>🚌</span>
          Nouvelle Ligne
        </button>
        <button class="quick-btn compact" (click)="navigateToStops()">
          <span>📍</span>
          Nouvel Arrêt
        </button>
      </div>
    </div>
  </main>
</div>
